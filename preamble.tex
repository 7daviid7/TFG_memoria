% !TEX root = main.tex

%----------------------------
%   Fonts and characters
%----------------------------

% Support for special characters
\usepackage[utf8]{inputenc}    % Specify input encoding
\usepackage[T1]{fontenc}       % Specify font encoding
\usepackage{xurl}              % Allow line breaking in URLs at any character
\usepackage[hidelinks,breaklinks]{hyperref} % Clickable links without borders
\renewcommand{\_}{\textunderscore\allowbreak} % Allow breaking after underscores in texttt
\renewcommand{\_}{\textunderscore\allowbreak} % Allow breaking after underscores in texttt

% Set main fonts
% Fonts catalogue: https://tug.org/FontCatalogue/
\usepackage{mathpazo}          % Use the Palatino font by default
\usepackage{amsmath}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{translator}           % Required for math environments (cases, text, etc.)
\usepackage{beramono}          % Override the monospace/typewriter font

% UdG title font
% Try to load Georgia 
% Loading OTF or system fonts is possible with XeLaTeX.
% If the document is compiled using pdfLaTeX, resort 
\usepackage{ifxetex}
\ifxetex
    \usepackage{fontspec}
    \newfontfamily\udgtitlefont{Georgia}
\else
    \newcommand{\zhawtitlefont}{\scshape}
\fi

%\usepackage[scaled]{helvet}

%----------------------------
%   Environments
%----------------------------

\usepackage{caption}           % Customized caption
\usepackage{subcaption}        % Subfigure captions
\usepackage{float}             % Required for [H] figure placement
\usepackage{makecell}          % Per-cell formatting in tables (\makecell)
\usepackage{pdfpages}          % Required to include PDF files/graphics (\includepdf)

\usepackage{todonotes}         % Introduces the command \todo
\setlength{\marginparwidth}{2.5cm} % Adjust this if the todo notes are out of margins

\usepackage{pgfgantt}          % For Gantt charts
\usepackage{tikz}              % Required for creating graphics (timeline)
\usetikzlibrary{shapes, arrows}

% Create boxes as follows:
% \begin{colorbox}{red}{2}
\usepackage{tcolorbox}
\tcbuselibrary{breakable, skins} % Enable breakable boxes
\newtcolorbox{textbox}[2]{
    arc=3pt,
    boxrule=#2pt,
    colback=#1!25!white,
    width=\textwidth,
    halign=justify,
    valign=center,
    colframe=#1!75!black,
    breakable, % Allow box to break across pages
    enhanced   % Required for breakable to work optimally
}

\newtcolorbox{reflectionbox}{
    colback=white,
    colframe=gray!50,
    boxrule=0pt,
    leftrule=3pt,
    arc=0pt,
    outer arc=0pt,
    left=10pt,
    right=10pt,
    top=5pt,
    bottom=5pt,
    fontupper=\itshape\small
}

%----------------------------
%   Colors
%----------------------------

% Set up colors
\usepackage[table]{xcolor}
% UdG Blue: Pantone 2945 U / R0 G20 B137
\definecolor{udgblue}{rgb}{0.00, 0.07, 0.54}
% Colors related to code listings
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codebackground}{rgb}{0.93,0.94,0.95}

%----------------------------
%   Code listings
%----------------------------

% Setup code listings
\usepackage{listings}
\lstdefinestyle{mystyle}{
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    columns=fullflexible,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=4,
    % Support for Catalan/Spanish accents in code blocks
    literate={à}{{\`a}}1
             {è}{{\`e}}1
             {é}{{\'e}}1
             {í}{{\'i}}1
             {ò}{{\`o}}1
             {ó}{{\'o}}1
             {ú}{{\'u}}1
             {ç}{{\c c}}1
             {·}{{\textperiodcentered}}1
             {ï}{{\"i}}1
             {ü}{{\"u}}1
             {Ñ}{{\~N}}1
             {ñ}{{\~n}}1
             {¿}{{?`}}1
             {¡}{{!`}}1
             {À}{{\`A}}1
             {È}{{\`E}}1
             {É}{{\'E}}1
             {Í}{{\'I}}1
             {Ò}{{\`O}}1
             {Ó}{{\'O}}1
             {Ú}{{\'U}}1
             {Ç}{{\c C}}1
             {á}{{\'a}}1
}
\lstset{style=mystyle}

% Envoltar els blocs de codi amb un fons sòlid de mdframed per evitar fissures
\mdfdefinestyle{codebox}{
    backgroundcolor=codebackground,
    linecolor=codebackground,
    innerleftmargin=5pt,
    innerrightmargin=5pt,
    innertopmargin=5pt,
    innerbottommargin=5pt,
    skipabove=10pt,
    skipbelow=10pt,
    roundcorner=0pt,
    splitbottomskip=2pt,
    splittopskip=2pt
}
\surroundwithmdframed[style=codebox]{lstlisting}

% Define Dart Language
\lstdefinelanguage{Dart}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break, const, final, class, void, int, double, String, bool, Map, List, dynamic, async, await, Future, Stream},
  keywordstyle=\color{magenta}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{codegreen}\ttfamily,
  stringstyle=\color{codepurple}\ttfamily,
  morestring=[b]',
  morestring=[b]",
  morestring=[s]{'''}{'''},
  morestring=[s]{"""}{"""}
}

% Define JSON Language
\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}

\lstdefinelanguage{json}{
    basicstyle=\footnotesize\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
    literate=
     *{à}{{\`a}}1
      {è}{{\`e}}1
      {é}{{\'e}}1
      {í}{{\'i}}1
      {ò}{{\`o}}1
      {ó}{{\'o}}1
      {ú}{{\'u}}1
      {ç}{{\c c}}1
      {·}{{\textperiodcentered}}1
      {ï}{{\"i}}1
      {ü}{{\"u}}1
      {Ñ}{{\~N}}1
      {ñ}{{\~n}}1
      {¿}{{?`}}1
      {¡}{{!`}}1
      {À}{{\`A}}1
      {È}{{\`E}}1
      {É}{{\'E}}1
      {Í}{{\'I}}1
      {Ò}{{\`O}}1
      {Ó}{{\'O}}1
      {Ú}{{\'U}}1
      {Ç}{{\c C}}1
      {á}{{\'a}}1
      {0}{{{\color{numb}0}}}{1}
      {1}{{{\color{numb}1}}}{1}
      {2}{{{\color{numb}2}}}{1}
      {3}{{{\color{numb}3}}}{1}
      {4}{{{\color{numb}4}}}{1}
      {5}{{{\color{numb}5}}}{1}
      {6}{{{\color{numb}6}}}{1}
      {7}{{{\color{numb}7}}}{1}
      {8}{{{\color{numb}8}}}{1}
      {9}{{{\color{numb}9}}}{1}
      {:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}

% minted is an alternative code listing package. (See chapter 2)
% For it to run successfully, ensure the following:
% - the Python package Pygments. Install with the following command:
%       python -m pip install Pygments
% - pdflatex (or xelatex) is executed with the flag --shell-escape
%   If you are using a TEX editor, you can modify the typesetting 
%   command somewhere in the settings.
%\usepackage[outputdir=build]{minted}
%\usemintedstyle{xcode}
% For fancier coloring schemes, see here:
% https://tex.stackexchange.com/questions/585582
% One could also create an own style in Pygments
% https://pygments.org/docs/styles/#creating-own-styles

%----------------------------
%   References
%----------------------------

% Set up references
\usepackage[
    backend=biber,             % Use biber backend (an external tool)
    sorting=none,              % Enumerates the reference in order of their appearance
    style=numeric-comp         % Choose here your preferred citation style
]{biblatex}
\addbibresource{example.bib}   % The filename of the bibliography

% BibLaTeX URL breaking settings
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}
\setcounter{biburlnumpenalty}{8000}
\usepackage[autostyle=false]{csquotes} 
                               % Required to generate language-dependent quotes 
                               % in the bibliography

%----------------------------------------------------------------------------------------
%   MARGIN SETTINGS
%----------------------------------------------------------------------------------------

\geometry{
    paper=a4paper,      % Change to letterpaper for US letter
    inner=2.5cm,        % Inner margin
    outer=3.8cm,        % Outer margin
    top=1.5cm,          % Top margin
    bottom=1.5cm,       % Bottom margin
    bindingoffset=.5cm, % Binding offset
    %showframe,         % Show the type block of the page
}
\setlength{\parskip}{1em}
\usepackage{enumitem}          % Layout control for list environments (e.g, itemize)
%\setlist{noitemsep}           % Suppress extra spaces between items
%\setlist{nosep}               % Suppress spaces before/after list environments
